{
    "version": "2.21.0",

    "services": {
        "backend": {
            "build": {
                "context": ".", 
                "dockerfile": "Dockerfile",
                "target": "dev"
            },
            "ports": [
                "7777-7780:7777"
            ],
            "networks": ["medtempo_back"],

            "deploy": {
                "mode": "replicated",
                "replicas": 3
            },

            "env_file": [
                ".env"
            ],

            "depends_on": [
                "queue"
            ]
        },


        "queue": {
            "image": "rabbitmq:latest",
            "networks": ["medtempo_back"],
            "build": {
                "args": {
                    "hostname": "0.0.0.0"
                }
            }
        }
    },

    "networks": {
        "medtempo_back": {
            "driver": "host"
        }
    }
}